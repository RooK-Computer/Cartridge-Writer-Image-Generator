# RooK Cartridge Writer Mode Image Builder

This is a fork of pi-gen and generates an image, that will be loaded into ramdisk on RooK. It can be used to utilize RooK as a Cartridge Writer.

Currently, it drops the user into an interactive shell after booting into ramdisk. For now, you have to use your knowledge to really write to cartridges.
Building the userland for it is up next. 

As the time of this writing, this feature is in early development and the Hardware is not yet ready for it. So to use images generated by this tool, you have to be very careful:

* RooK Mk2 didn't have a working cartridge slot, so don't bother trying.
* RooK Mk3 does have a working cartdridge slot but powers down upon eject. See below.
* RooK Mk3.1 should also have a working cartridge slot. See below.

## Using this image on RooK Mk3

As RooK Mk3 powers down if you remove the cartridge, you have to reconfigure the mainboard. put the jumper in the position used to boot from the onboard sd slot, but don't populate that slot. Insert the Cartridge containing the writer image into your RooK and connect Power AFTERWARDS.

Once it booted up you will be able to remove the cartridge and insert another one to write to it.

## Using this image on RooK Mk3.1

Just as Mk3, Mk3.1 powers down if you remove the cartridge. However the Mainboard does not have a configuration jumper we can use. Instead you have to either provide power to the MOSFET emulating the jumper or short the two ground testpads, TP4 and TP5. Afterwards RooK Mk3.1 will always boot upon power, no matter whether a cartridge is present or not.

Once this is done, insert the writer cartridge, connect power and remove it once its booted up. Then you can write to cartridges using this ramdisk based install.

## Building

execute `sudo ./build.sh -c config` to build the image. For re-runs, `sudo rm -Rf deploy` and `sudo rm -Rf work` to clean everything up.
